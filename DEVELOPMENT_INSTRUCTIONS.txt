================================================================================
CAMPUSWHISPER - COMPLETE DEVELOPMENT GUIDE
================================================================================

ğŸ“– **READ THIS FIRST - EVERYTHING YOU NEED IN ONE FILE**

Last Updated: 2026-01-11
Project Status: 97% Complete (Phase 0-9 âœ… | Phase 10 In Progress)
Development Approach: Root to Leaf (Parent â†’ Child hierarchy)
Architecture: Data Flow with Repository Pattern (Database-agnostic)

================================================================================
âš¡ QUICK REFERENCE (AI: READ THIS FIRST!)
================================================================================

**ğŸ¯ Project Status:** 97% Complete | Phase 0-9 âœ… | Phase 10 In Progress

**ğŸ—ï¸ Architecture Pattern (MUST USE):**
UI â†’ Provider (PaginatedProvider) â†’ Repository (BaseRepository) â†’ DatabaseService

**âœ… What's Complete:**
- âœ… All 18+ data models with JSON serialization
- âœ… All 18 global widgets (inputs, buttons, dialogs, cards, etc.)
- âœ… All utilities (validators, date formatter, snackbar, dialog helpers)
- âœ… All constants (error messages, validation, app config)
- âœ… Complete database abstraction layer (database-agnostic)
- âœ… Complete repository pattern with BaseRepository
- âœ… Complete provider pattern with PaginatedProvider
- âœ… All main UI pages connected to Firebase
- âœ… All authentication flows working
- âœ… All profile/settings pages complete
- âœ… Theme system (light/dark mode follows system)
- âœ… Last login tracking implemented

**âš ï¸ CRITICAL RULES:**
1. ALWAYS use colorScheme (NEVER hardcode colors)
2. ALWAYS use AppDimensions (NEVER hardcode spacing)
3. NEVER write CRUD from scratch (extend BaseRepository)
4. NEVER access DatabaseService from UI (use providers)
5. ALWAYS use safeOperation() for user actions
6. ALWAYS use existing patterns (read similar pages first)
7. ALWAYS dispose controllers in dispose()

**ğŸ“š Key Sections to Read:**
- Section 5: Data Flow Architecture (MUST READ - has all patterns)
- Section 6: Centralized Systems (validators, snackbar, dialog helpers)
- Section 7: Theme & Styling Guidelines (colorScheme, AppDimensions)
- Section 10: Reference Implementations (learn from existing code)

================================================================================
TABLE OF CONTENTS
================================================================================

1. QUICK START FOR NEW SESSIONS
2. PROJECT OVERVIEW & STATUS
3. COMPLETE PROJECT STRUCTURE
4. DEVELOPMENT PHASES
5. DATA FLOW ARCHITECTURE â­ CRITICAL
6. CENTRALIZED SYSTEMS
7. THEME & STYLING GUIDELINES
8. ARCHITECTURE & FILE ORGANIZATION
9. CODING PATTERNS & BEST PRACTICES
10. REFERENCE IMPLEMENTATIONS
11. NEXT STEPS & WHAT'S MISSING
12. WORKFLOW & CHECKLIST

================================================================================
1. QUICK START FOR NEW SESSIONS (AI READ THIS FIRST!)
================================================================================

**When starting a new session:**

1. âœ… Read this entire file (DEVELOPMENT_INSTRUCTIONS.txt)
2. âœ… Check Section 2 for current project status
3. âœ… Check Section 11 for next priority tasks
4. âœ… Review similar existing implementations before coding
5. âœ… Follow Section 7 (Theme Guidelines) strictly
6. âœ… Use Section 9 (Coding Patterns) as templates

**CRITICAL RULES (AI MUST FOLLOW):**
- â­ ALWAYS use colorScheme (NEVER Colors.white, Colors.red, etc.)
- â­ ALWAYS use AppDimensions (NEVER hardcoded numbers like 16, 12)
- â­ ALWAYS use ErrorMessages constants (NEVER hardcoded strings)
- â­ NEVER bypass BaseRepository (extend it for new repositories)
- â­ NEVER access DatabaseService directly from UI
- â­ ALWAYS use PaginatedProvider for list pages
- â­ ALWAYS use safeOperation() for user actions (built-in feedback)
- â­ ALWAYS dispose controllers properly
- â­ ALWAYS read existing similar code before creating new features

**Sample AI Greeting:**
"Hi! I've read the development guide and understand CampusWhisper is at
97% complete with Phases 0-9 COMPLETE âœ…

Key understanding:
- All UI pages connected to Firebase with real data
- Theme system follows device (no manual toggle)
- Last login tracking implemented
- Profile colors fixed (no gradients, uses colorScheme)
- All providers registered and working

Ready to work on Phase 10 tasks. What would you like to focus on?
1. Add dummy data to Firebase for testing
2. Create detail pages (thread, event, competition detail)
3. Implement comment system
4. Testing & polish
5. Other features"

================================================================================
2. PROJECT OVERVIEW & STATUS
================================================================================

**Project Name:** CampusWhisper
**Type:** Flutter Campus Social Application
**Backend:** Firebase (Firestore, Auth, Storage)
**State Management:** Provider pattern with custom base classes

**Features Implemented:**
âœ… Authentication (Login, Signup, Email Verification, Password Reset)
âœ… Home Dashboard (connected to Firebase)
âœ… Thread/Discussions (Posts with filters, pagination)
âœ… Study Hub (Course Routine, Roadmap, CGPA Calculator, Scholarship)
âœ… Campus Hub (Events, Lost & Found, Clubs, Competitions - all with Firebase)
âœ… More Tab (Profile, Edit Profile, Settings, Notifications, Saved, About)
âœ… User Profile Management (XP tracking, badges, last login)
âœ… Theme System (follows device light/dark mode)

**Current Status (2026-01-11):**
- Total Completion: 97%
- Phase 0-9: âœ… COMPLETE
- Phase 10: ğŸ”„ IN PROGRESS (Testing & Polish)

**What's Working:**
âœ… Complete authentication flow
âœ… User registration and login
âœ… Profile management (view, edit)
âœ… Last login timestamp tracking
âœ… All list pages with Firebase data
âœ… Infinite scroll pagination (20 items per page)
âœ… Pull-to-refresh on all pages
âœ… Category/type/status filters
âœ… Search functionality
âœ… Empty/loading/error states
âœ… Theme follows system (light/dark mode)
âœ… All colors use colorScheme (no hardcoded colors)

**What's NOT Working:**
âŒ No real data in Firebase (all pages show empty states)
âŒ Image upload functionality (StorageService ready, not integrated)
âŒ Comment system (CommentProvider ready, UI not integrated)
âŒ Detail pages (thread, event, competition detail pages needed)
âŒ Push notifications
âŒ Real-time updates (listeners not implemented)

**Recent Changes (2026-01-11):**
âœ… Fixed profile page colors (removed gradients, uses colorScheme)
âœ… Implemented last login tracking
âœ… Updated UserRepository with updateLastLogin method
âœ… LoginProvider now updates last login on successful login
âœ… Removed theme toggle (app follows system theme)
âœ… Fixed all hardcoded Colors to use colorScheme
âœ… All dummy data removed from More section pages

================================================================================
3. COMPLETE PROJECT STRUCTURE
================================================================================

lib/
â”‚
â”œâ”€â”€ main.dart                                     âœ… COMPLETE
â”‚
â”œâ”€â”€ core/                                         [CENTRALIZED SYSTEMS]
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”œâ”€â”€ app_theme.dart                        âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ app_dimensions.dart                   âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ theme_provider.dart                   âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                                 âœ… DATABASE ABSTRACTION
â”‚   â”‚   â”œâ”€â”€ database_service.dart                 âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ firestore_adapter.dart                âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ query_builder.dart                    âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ paginated_result.dart                 âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/                             âœ… REPOSITORY PATTERN
â”‚   â”‚   â””â”€â”€ base_repository.dart                  âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                                âœ… PROVIDER PATTERN
â”‚   â”‚   â”œâ”€â”€ base_provider.dart                    âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ paginated_provider.dart               âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ app_config.dart                       âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ exceptions/
â”‚   â”‚   â””â”€â”€ app_exceptions.dart                   âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ app_constants.dart                    âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ error_messages.dart                   âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ validation_messages.dart              âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ build_text.dart                       âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ validators.dart                       âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ date_formatter.dart                   âœ… COMPLETE
â”‚   â”‚   â”œâ”€â”€ snackbar_helper.dart                  âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ dialog_helper.dart                    âœ… COMPLETE
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth_service.dart                     âœ… COMPLETE
â”‚   â”‚   â””â”€â”€ storage_service.dart                  âœ… COMPLETE
â”‚   â”‚
â”‚   â””â”€â”€ extensions/
â”‚       â””â”€â”€ context_extensions.dart               âœ… COMPLETE
â”‚
â”œâ”€â”€ models/                                       âœ… ALL MODELS COMPLETE
â”‚   â”œâ”€â”€ user_model.dart                           âœ…
â”‚   â”œâ”€â”€ posts_model.dart                          âœ…
â”‚   â”œâ”€â”€ vote_model.dart                           âœ…
â”‚   â”œâ”€â”€ event_model.dart                          âœ…
â”‚   â”œâ”€â”€ competition_model.dart                    âœ…
â”‚   â”œâ”€â”€ lost_found_item_model.dart                âœ…
â”‚   â”œâ”€â”€ club_model.dart                           âœ…
â”‚   â”œâ”€â”€ comment_model.dart                        âœ…
â”‚   â”œâ”€â”€ course_routine_model.dart                 âœ…
â”‚   â””â”€â”€ [13 more models...]                       âœ…
â”‚
â”œâ”€â”€ providers/                                    âœ… ALL PROVIDERS COMPLETE
â”‚   â”œâ”€â”€ login_provider.dart                       âœ… (with last login tracking)
â”‚   â”œâ”€â”€ sign_up_provider.dart                     âœ…
â”‚   â”œâ”€â”€ user_provider.dart                        âœ…
â”‚   â”œâ”€â”€ post_provider.dart                        âœ…
â”‚   â”œâ”€â”€ event_provider.dart                       âœ…
â”‚   â”œâ”€â”€ competition_provider.dart                 âœ…
â”‚   â”œâ”€â”€ lost_found_provider.dart                  âœ…
â”‚   â”œâ”€â”€ club_provider.dart                        âœ…
â”‚   â”œâ”€â”€ comment_provider.dart                     âœ…
â”‚   â””â”€â”€ [6 more providers...]                     âœ…
â”‚
â”œâ”€â”€ repository/                                   âœ… ALL REPOSITORIES COMPLETE
â”‚   â”œâ”€â”€ user_repository.dart                      âœ… (with updateLastLogin)
â”‚   â”œâ”€â”€ post_repository.dart                      âœ…
â”‚   â”œâ”€â”€ event_repository.dart                     âœ…
â”‚   â”œâ”€â”€ competition_repository.dart               âœ…
â”‚   â”œâ”€â”€ lost_found_repository.dart                âœ…
â”‚   â”œâ”€â”€ club_repository.dart                      âœ…
â”‚   â”œâ”€â”€ comment_repository.dart                   âœ…
â”‚   â””â”€â”€ [4 more repositories...]                  âœ…
â”‚
â”œâ”€â”€ routing/
â”‚   â”œâ”€â”€ app_routes.dart                           âœ… COMPLETE
â”‚   â””â”€â”€ custom_transitions.dart                   âœ… COMPLETE
â”‚
â””â”€â”€ ui/
    â”œâ”€â”€ widgets/                                  âœ… ALL WIDGETS COMPLETE
    â”‚   â”œâ”€â”€ custom_input.dart                     âœ…
    â”‚   â”œâ”€â”€ default_button.dart                   âœ…
    â”‚   â”œâ”€â”€ empty_state.dart                      âœ…
    â”‚   â”œâ”€â”€ error_widget.dart                     âœ…
    â”‚   â”œâ”€â”€ user_avatar.dart                      âœ…
    â”‚   â”œâ”€â”€ cached_image.dart                     âœ…
    â”‚   â””â”€â”€ [12 more widgets...]                  âœ…
    â”‚
    â””â”€â”€ pages/
        â”œâ”€â”€ auth/                                 âœ… COMPLETE
        â”‚   â”œâ”€â”€ login_page.dart                   âœ…
        â”‚   â”œâ”€â”€ sign_up_page.dart                 âœ…
        â”‚   â”œâ”€â”€ forgot_password_page.dart         âœ…
        â”‚   â””â”€â”€ email_verification_page.dart      âœ…
        â”‚
        â”œâ”€â”€ navigation/                           âœ… COMPLETE
        â”‚   â””â”€â”€ navigation_page.dart              âœ…
        â”‚
        â”œâ”€â”€ home/                                 âœ… COMPLETE
        â”‚   â”œâ”€â”€ home_page.dart                    âœ… (connected to Firebase)
        â”‚   â””â”€â”€ widgets/                          âœ…
        â”‚
        â”œâ”€â”€ thread/                               âš ï¸ NEEDS DETAIL PAGE
        â”‚   â”œâ”€â”€ thread_page.dart                  âœ… (connected to Firebase)
        â”‚   â”œâ”€â”€ thread_detail_page.dart           âŒ TODO
        â”‚   â””â”€â”€ widgets/                          âœ…
        â”‚       â”œâ”€â”€ comment_card.dart             âŒ TODO
        â”‚       â””â”€â”€ comment_input.dart            âŒ TODO
        â”‚
        â”œâ”€â”€ study/                                âœ… COMPLETE
        â”‚   â”œâ”€â”€ study_page.dart                   âœ…
        â”‚   â”œâ”€â”€ course_routine/                   âœ…
        â”‚   â”œâ”€â”€ course_roadmap/                   âœ…
        â”‚   â”œâ”€â”€ cgpa_calculator/                  âœ…
        â”‚   â””â”€â”€ scholarship/                      âœ…
        â”‚
        â”œâ”€â”€ campus/                               âš ï¸ NEEDS DETAIL PAGES
        â”‚   â”œâ”€â”€ campus_page.dart                  âœ…
        â”‚   â”œâ”€â”€ events/                           âš ï¸
        â”‚   â”‚   â”œâ”€â”€ events_page.dart              âœ… (connected to Firebase)
        â”‚   â”‚   â”œâ”€â”€ event_detail_page.dart        âœ… (created, needs Firebase)
        â”‚   â”‚   â”œâ”€â”€ event_attendees_page.dart     âœ… (created, needs Firebase)
        â”‚   â”‚   â””â”€â”€ event_comments_page.dart      âœ… (created, needs Firebase)
        â”‚   â”œâ”€â”€ lost_and_found/                   âš ï¸
        â”‚   â”‚   â”œâ”€â”€ lost_and_found_page.dart      âœ… (connected to Firebase)
        â”‚   â”‚   â”œâ”€â”€ item_detail_page.dart         âœ… (created, needs Firebase)
        â”‚   â”‚   â””â”€â”€ contact_poster_page.dart      âœ… (created, needs Firebase)
        â”‚   â”œâ”€â”€ clubs/                            âœ…
        â”‚   â”‚   â”œâ”€â”€ clubs_page.dart               âœ… (connected to Firebase)
        â”‚   â”‚   â””â”€â”€ club_detail_page.dart         âœ… (created, needs Firebase)
        â”‚   â””â”€â”€ competitions/                     âš ï¸
        â”‚       â”œâ”€â”€ competitions_page.dart        âœ… (connected to Firebase)
        â”‚       â”œâ”€â”€ competition_detail_page.dart  âœ… (created, needs Firebase)
        â”‚       â”œâ”€â”€ registration_page.dart        âœ… (created, needs Firebase)
        â”‚       â””â”€â”€ participants_page.dart        âœ… (created, needs Firebase)
        â”‚
        â”œâ”€â”€ more/                                 âœ… COMPLETE
        â”‚   â”œâ”€â”€ more_page.dart                    âœ… (connected to Firebase)
        â”‚   â”œâ”€â”€ profile/
        â”‚   â”‚   â”œâ”€â”€ profile_page.dart             âœ… (colors fixed)
        â”‚   â”‚   â””â”€â”€ edit_profile_page.dart        âœ…
        â”‚   â”œâ”€â”€ settings/
        â”‚   â”‚   â””â”€â”€ settings_page.dart            âœ… (theme toggle removed)
        â”‚   â”œâ”€â”€ notifications/
        â”‚   â”‚   â””â”€â”€ notifications_page.dart       âœ… (dummy data removed)
        â”‚   â”œâ”€â”€ saved/
        â”‚   â”‚   â””â”€â”€ saved_page.dart               âœ… (dummy data removed)
        â”‚   â””â”€â”€ about/
        â”‚       â””â”€â”€ about_page.dart               âœ… (colors fixed)
        â”‚
        â””â”€â”€ shared/                               âœ… COMPLETE
            â”œâ”€â”€ report_page.dart                  âœ…
            â”œâ”€â”€ chat_page.dart                    âœ…
            â”œâ”€â”€ image_viewer_page.dart            âœ…
            â”œâ”€â”€ splash_screen.dart                âœ…
            â””â”€â”€ error_page.dart                   âœ…

================================================================================
4. DEVELOPMENT PHASES
================================================================================

**âœ… PHASE 0: FOUNDATION** - COMPLETE
- Core utilities, constants, extensions
- Global widgets
- Data models
- Database abstraction layer
- Repository pattern with BaseRepository
- Provider pattern with PaginatedProvider

**âœ… PHASE 1: AUTHENTICATION** - COMPLETE
- Login, Signup, Email Verification, Password Reset

**âœ… PHASE 2: MAIN TABS** - COMPLETE
- Home, Thread, Study Hub, Campus Hub, More Hub

**âœ… PHASE 3: STUDY CHILD PAGES** - COMPLETE
- Course Routine, Roadmap, CGPA Calculator, Scholarship

**âœ… PHASE 4: CAMPUS CHILD PAGES** - COMPLETE
- Events, Lost & Found, Clubs, Competitions (detail pages created)

**âœ… PHASE 5: MORE CHILD PAGES** - COMPLETE
- Profile, Edit Profile, Settings, Notifications, Saved, About

**âœ… PHASE 6: BACKEND INTEGRATION - REPOSITORIES** - COMPLETE
- 6 repositories extending BaseRepository

**âœ… PHASE 7: SHARED PAGES** - COMPLETE
- Report, Chat, Image Viewer, Splash, Error pages

**âœ… PHASE 8: FIREBASE SERVICES** - COMPLETE
- AuthService, StorageService

**âœ… PHASE 9: CONNECT UI TO BACKEND** - COMPLETE
- All list pages connected to Firebase
- UserProvider with profile management
- Last login tracking implemented
- Theme system finalized
- All colors use colorScheme
- All dummy data removed from core pages

**ğŸ”„ PHASE 10: TESTING & POLISH** - IN PROGRESS
Next priorities:
1. Add dummy data to Firebase for testing
2. Test all features end-to-end
3. Implement comment system UI
4. Create thread detail page
5. Polish UI/UX
6. Performance optimization

================================================================================
5. DATA FLOW ARCHITECTURE â­ CRITICAL
================================================================================

**ğŸ¯ ARCHITECTURE PATTERN (MUST USE):**

```
UI (Pages/Widgets)
      â†•
Providers (State Management + User Feedback)
      â†•
Repositories (Business Logic + CRUD)
      â†•
Database Service (Abstract Interface)
      â†•
Firestore Adapter (Concrete Implementation)
      â†•
Firebase/Firestore
```

**ğŸ”§ LAYER 1: DATABASE ABSTRACTION**

Location: `lib/core/database/`

- DatabaseService: Abstract interface for ALL database operations
- FirestoreAdapter: Concrete implementation using Firestore
- Query building, pagination, CRUD operations

**ğŸ”§ LAYER 2: REPOSITORY PATTERN**

Location: `lib/core/repositories/base_repository.dart`

**BaseRepository<T>**: Generic repository eliminating 80% code duplication

Example:
```dart
class PostRepository extends BaseRepository<PostModel> {
  @override
  String get collectionName => 'posts';

  @override
  PostModel fromJson(Map<String, dynamic> json) => PostModel.fromJson(json);

  @override
  Map<String, dynamic> toJson(PostModel model) => model.toJson();

  @override
  String getId(PostModel model) => model.id;

  // You get create, getAll, getById, update, delete for FREE!

  // Add custom methods:
  Future<void> updateLastLogin(String userId) async {
    // Custom logic here
  }
}
```

**ğŸ”§ LAYER 3: PROVIDER PATTERN**

Location: `lib/core/providers/`

**PaginatedProvider<T>**: Extends BaseProvider with pagination

Example:
```dart
class PostProvider extends PaginatedProvider<PostModel> {
  final PostRepository _repository = PostRepository();

  @override
  Future<PaginatedResult<PostModel>> fetchItems({
    List<QueryFilter>? filters,
    dynamic cursor,
  }) async {
    return _repository.getAll(
      filters: filters,
      limit: 20,
      cursor: cursor,
    );
  }
}
```

**ğŸ”§ LAYER 4: UI INTEGRATION**

Use Consumer or ListenableBuilder:
```dart
Consumer<PostProvider>(
  builder: (context, provider, child) {
    if (provider.isLoading && provider.items.isEmpty) {
      return CircularProgressIndicator();
    }

    if (provider.hasError && provider.items.isEmpty) {
      return ErrorWidget(onRetry: provider.refresh);
    }

    if (provider.isEmpty) {
      return EmptyState(message: 'No posts yet');
    }

    return RefreshIndicator(
      onRefresh: provider.refresh,
      child: ListView.builder(
        itemCount: provider.items.length,
        itemBuilder: (context, index) => PostCard(provider.items[index]),
      ),
    );
  },
)
```

================================================================================
6. CENTRALIZED SYSTEMS (USE THESE - DON'T RECREATE!)
================================================================================

**1. VALIDATION â†’ lib/core/utils/validators.dart**

```dart
CustomInput(
  validator: Validators.email,  // or .required, .phone, .minLength(6)
)
```

**2. SNACKBAR â†’ lib/core/utils/snackbar_helper.dart**

```dart
SnackbarHelper.showSuccess(context, 'Success!');
SnackbarHelper.showError(context, 'Error occurred');
SnackbarHelper.showInfo(context, 'Info message');
SnackbarHelper.showWarning(context, 'Warning message');
```

**3. DIALOGS â†’ lib/core/utils/dialog_helper.dart**

```dart
final confirmed = await DialogHelper.showConfirmation(
  context,
  title: 'Delete Item',
  message: 'Are you sure?',
);
if (confirmed) {
  // Delete
}
```

**4. DATE FORMATTING â†’ lib/core/utils/date_formatter.dart**

```dart
DateFormatter.formatDate(date);           // "Jan 11, 2026"
DateFormatter.timeAgo(date);              // "2 hours ago"
DateFormatter.formatCustom(date, 'yyyy-MM-dd');
```

**5. CONSTANTS**

```dart
// lib/core/constants/error_messages.dart
ErrorMessages.somethingWentWrong
ErrorMessages.networkError
ErrorMessages.postCreated

// lib/core/constants/validation_messages.dart
ValidationMessages.emailRequired
ValidationMessages.passwordTooShort

// lib/core/constants/app_constants.dart
AppConstants.appName
AppConstants.apiUrl
```

================================================================================
7. THEME & STYLING GUIDELINES â­ CRITICAL
================================================================================

**COLOR SCHEME (MUST USE)**

âœ… ALWAYS: `Theme.of(context).colorScheme.primary`
âŒ NEVER: `Color(0xFF3F51B5)` or `Colors.blue` or `Colors.white`

Common colorScheme properties:
- `colorScheme.primary` - Primary brand color
- `colorScheme.onPrimary` - Text/icons on primary
- `colorScheme.secondary` - Secondary brand color
- `colorScheme.surface` - Surface backgrounds
- `colorScheme.onSurface` - Text on surfaces
- `colorScheme.surfaceContainerHighest` - Elevated surfaces
- `colorScheme.error` - Error states
- `colorScheme.onError` - Text/icons on error

**OPACITY/ALPHA VALUES**

Use `.withAlpha()` instead of deprecated `.withOpacity()`:
- 60% opacity = `withAlpha(153)`
- 30% opacity = `withAlpha(77)`
- 20% opacity = `withAlpha(51)`
- 10% opacity = `withAlpha(26)`

Example:
```dart
colorScheme.onSurface.withAlpha(153)  // 60% opacity text
```

**DIMENSIONS (MUST USE)**

âœ… CORRECT:
```dart
SizedBox(height: AppDimensions.h16)
padding: EdgeInsets.all(AppDimensions.space12)
fontSize: AppDimensions.bodyFontSize
borderRadius: BorderRadius.circular(AppDimensions.radius12)
```

âŒ WRONG:
```dart
SizedBox(height: 16)
padding: EdgeInsets.all(12)
fontSize: 14
borderRadius: BorderRadius.circular(12)
```

**Available AppDimensions:**

Spacing: `space4`, `space8`, `space12`, `space16`, `space24`, `space32`
Height: `h4`, `h8`, `h12`, `h16`, `h24`, `h32`
Width: `w4`, `w8`, `w12`, `w16`, `w24`, `w32`
Padding: `horizontalPadding`, `verticalPadding`
Font sizes: `titleFontSize`, `bodyFontSize`, `captionFontSize`
Icon sizes: `smallIconSize`, `mediumIconSize`, `largeIconSize`
Radius: `radius4`, `radius8`, `radius12`, `radius16`
Elevation: `elevation1`, `elevation2`, `elevation4`

================================================================================
8. ARCHITECTURE & FILE ORGANIZATION
================================================================================

**WIDGET PLACEMENT RULES:**

Global widgets (lib/ui/widgets/):
- Used in 2+ different pages
- Generic purpose (buttons, inputs, dialogs, appbars)

Page-specific widgets (lib/ui/pages/[page]/widgets/):
- Tightly coupled to specific feature
- Custom cards, filters, forms

**MODEL REQUIREMENTS:**

All models must include:
- `fromJson()` constructor
- `toJson()` method
- Field validation if needed

**PROVIDER PATTERN:**

- Extend `ChangeNotifier` or `PaginatedProvider`
- Handle data fetching
- Manage state
- Business logic

**REPOSITORY PATTERN:**

- Extend `BaseRepository`
- Firestore CRUD operations
- Custom queries

================================================================================
9. CODING PATTERNS & BEST PRACTICES
================================================================================

**1. PAGE STRUCTURE PATTERN**

```dart
class FeaturePage extends StatefulWidget {
  const FeaturePage({super.key});

  @override
  State<FeaturePage> createState() => _FeaturePageState();
}

class _FeaturePageState extends State<FeaturePage> {
  // 1. State variables
  String? _selectedFilter;
  bool _isLoading = false;

  // 2. Controllers
  final TextEditingController _searchController = TextEditingController();

  // 3. initState
  @override
  void initState() {
    super.initState();
    // Initialize
  }

  // 4. dispose
  @override
  void dispose() {
    _searchController.dispose();
    super.dispose();
  }

  // 5. build
  @override
  Widget build(BuildContext context) {
    final colorScheme = Theme.of(context).colorScheme;

    return Scaffold(
      appBar: DefaultAppBar(title: 'Feature'),
      body: _buildBody(),
    );
  }

  Widget _buildBody() {
    // Body implementation
  }
}
```

**2. CARD WIDGET PATTERN**

```dart
class FeatureCard extends StatelessWidget {
  final Map<String, dynamic> item;

  const FeatureCard({super.key, required this.item});

  @override
  Widget build(BuildContext context) {
    final colorScheme = Theme.of(context).colorScheme;

    return Card(
      margin: EdgeInsets.symmetric(
        vertical: AppDimensions.space8,
        horizontal: AppDimensions.horizontalPadding,
      ),
      elevation: AppDimensions.elevation2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(AppDimensions.radius12),
      ),
      child: InkWell(
        onTap: () => _navigateToDetail(context),
        borderRadius: BorderRadius.circular(AppDimensions.radius12),
        child: Padding(
          padding: EdgeInsets.all(AppDimensions.space16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              // Card content
            ],
          ),
        ),
      ),
    );
  }

  void _navigateToDetail(BuildContext context) {
    Navigator.pushNamed(
      context,
      AppRoutes.featureDetail,
      arguments: item,
    );
  }
}
```

**3. ERROR HANDLING PATTERN**

```dart
try {
  await someOperation();
  if (context.mounted) {
    SnackbarHelper.showSuccess(context, ErrorMessages.successMessage);
  }
} catch (e) {
  if (context.mounted) {
    SnackbarHelper.showError(context, ErrorMessages.somethingWentWrong);
  }
}
```

**4. ICONS (icons_plus package - Iconsax)**

Always use `_outline` variants:
- Search: `Iconsax.search_normal_outline`
- Add: `Iconsax.add_outline`
- Calendar: `Iconsax.calendar_outline`
- Heart: `Iconsax.heart_outline`
- User: `Iconsax.user_outline`
- Settings: `Iconsax.setting_2_outline`

For active state: Use `_bold` variants
- `Iconsax.home_2_bold`
- `Iconsax.message_2_bold`

================================================================================
10. REFERENCE IMPLEMENTATIONS
================================================================================

Before creating similar features, ALWAYS read these:

1. **Events Page** (lib/ui/pages/campus/events/events_page.dart)
   - Connected to Firebase via EventProvider
   - Category filtering with chips
   - Infinite scroll pagination
   - Pull-to-refresh
   - Empty/loading/error states

2. **Thread Page** (lib/ui/pages/thread/thread_page.dart)
   - Connected to Firebase via PostProvider
   - Type filtering (question, discussion, announcement)
   - Pagination and refresh

3. **Profile Page** (lib/ui/pages/more/profile/profile_page.dart)
   - Uses colorScheme (no hardcoded colors)
   - No gradients (solid backgrounds)
   - Proper data display with UserProvider

4. **Login Provider** (lib/providers/login_provider.dart)
   - Last login tracking implementation
   - Proper error handling
   - Context-mounted checks

5. **User Repository** (lib/repository/user_repository.dart)
   - Custom updateLastLogin method
   - Extends BaseRepository
   - Proper error handling

================================================================================
11. NEXT STEPS & WHAT'S MISSING
================================================================================

**ğŸ¯ IMMEDIATE PRIORITIES:**

**1. ADD DUMMY DATA TO FIREBASE** â­â­â­ CRITICAL
All pages are connected but show empty states. Need:
- Create Firestore collections
- Add sample users (10-15)
- Add sample posts (20-30)
- Add sample events (10-15)
- Add sample clubs (5-10)
- Add sample competitions (5-10)
- Add sample lost & found items (10-15)

**2. TEST END-TO-END FUNCTIONALITY** â­â­â­
- Test user registration and login
- Test last login updates
- Test all list pages with real data
- Test pagination (scroll to load more)
- Test pull-to-refresh
- Test filters and search
- Test profile page data display

**3. IMPLEMENT COMMENT SYSTEM** â­â­
Create UI for comments:
- thread_detail_page.dart with comments
- comment_card.dart widget
- comment_input.dart widget
- Connect to CommentProvider

**4. POLISH & OPTIMIZE** â­
- Test on different screen sizes
- Optimize performance
- Fix any UI glitches
- Improve loading states
- Add better error messages

**OPTIONAL ENHANCEMENTS:**
- Image upload integration (StorageService ready)
- Real-time updates (Firestore listeners)
- Push notifications
- Advanced search
- User blocking/reporting

================================================================================
12. WORKFLOW & CHECKLIST
================================================================================

**BEFORE STARTING ANY WORK:**

1. âœ… Read this file (DEVELOPMENT_INSTRUCTIONS.txt)
2. âœ… Check Section 2 for current project status
3. âœ… Check Section 11 for next priorities
4. âœ… Read similar existing implementations
5. âœ… Review Section 7 (Theme Guidelines)

**WHEN CREATING A NEW FEATURE:**

1. âœ… Read similar reference implementations
2. âœ… Use AppDimensions for all spacing
3. âœ… Use colorScheme for all colors
4. âœ… Use ErrorMessages for all messages
5. âœ… Use centralized helpers (validators, snackbar, dialogs)
6. âœ… Handle empty/loading/error states
7. âœ… Dispose controllers properly
8. âœ… Test on different screen sizes
9. âœ… Update this file with completion status

**COMMON MISTAKES TO AVOID:**

1. âŒ Hardcoding colors (use colorScheme)
2. âŒ Hardcoding spacing (use AppDimensions)
3. âŒ Hardcoding messages (use ErrorMessages)
4. âŒ Not disposing controllers
5. âŒ Not handling empty/loading/error states
6. âŒ Using Colors.white, Colors.red, etc.
7. âŒ Not checking context.mounted before async operations
8. âŒ Bypassing BaseRepository
9. âŒ Creating duplicate utilities
10. âŒ Not reading existing implementations

================================================================================
CURRENT FOCUS
================================================================================

ğŸ“ **Phase 10: Testing & Polish** (IN PROGRESS)

**Next Action:**
Choose ONE of these approaches:

**Option 1: Add Dummy Data First** (Recommended)
1. Create Firebase collections
2. Add sample data for all entities
3. Test all pages with real data
4. Fix any issues that appear

**Option 2: Implement Missing Features**
1. Create thread_detail_page.dart with comments
2. Integrate comment system
3. Test comment functionality
4. Add to other detail pages

**Option 3: Polish & Optimize**
1. Test all features end-to-end
2. Fix UI glitches
3. Optimize performance
4. Improve error handling

**Recommended: Start with Option 1** - Add dummy data so you can see the app working with real Firebase data, then test everything thoroughly.

================================================================================
REMEMBER
================================================================================

- Quality over speed
- Follow patterns religiously
- Use centralized systems (NEVER hardcode)
- colorScheme for colors, AppDimensions for spacing, ErrorMessages for text
- Read before writing
- Test thoroughly
- Update this file when complete

**All infrastructure is COMPLETE!** âœ…
**Now focus on testing and polish!** ğŸš€

Last Updated: 2026-01-11
Current Status: 97% Complete (Phases 0-9 âœ… | Phase 10 In Progress)
Next Milestone: Add dummy data to Firebase and test all features

================================================================================
