================================================================================
CAMPUSWHISPER - COMPLETE DEVELOPMENT GUIDE
================================================================================

üìñ **EVERYTHING YOU NEED IN ONE FILE**

Last Updated: 2026-01-12
Project Status: ‚úÖ UI Complete | üîÑ Backend Implementation Starting
Architecture: SIMPLIFIED - Direct Firebase + Provider Pattern

================================================================================
üìã TABLE OF CONTENTS
================================================================================

1. QUICK REFERENCE
2. PROJECT STRUCTURE
3. DATABASE SCHEMA (Complete Firestore Structure)
4. PHASE-BY-PHASE IMPLEMENTATION PLAN
5. SIMPLIFIED ARCHITECTURE & CODE PATTERNS
6. THEME & STYLING GUIDELINES
7. WORKFLOW & CHECKLIST

================================================================================
1. ‚ö° QUICK REFERENCE
================================================================================

**üéØ Current Status:**
‚úÖ All UI pages complete and working
‚úÖ All models defined with JSON serialization
‚úÖ Database schema fully documented below
üîÑ Ready to add backend feature-by-feature

**üèóÔ∏è SIMPLIFIED ARCHITECTURE:**
```
UI (Widget/Page)
      ‚Üì
Provider (State Management)
      ‚Üì
Firestore (Direct Firebase Calls)
```

**‚ö†Ô∏è CRITICAL RULES:**
1. ‚úÖ ALWAYS use colorScheme (NEVER Colors.white, Colors.red, etc.)
2. ‚úÖ ALWAYS use AppDimensions (NEVER hardcoded numbers)
3. ‚úÖ ALWAYS check Section 3 (DATABASE SCHEMA) for field names
4. ‚úÖ Use model classes for JSON serialization
5. ‚úÖ Start simple - direct Firestore calls in providers
6. ‚úÖ Build one feature at a time
7. ‚úÖ ALWAYS dispose controllers

================================================================================
2. üìÇ PROJECT STRUCTURE
================================================================================

lib/
‚îú‚îÄ‚îÄ models/                           ‚úÖ All complete
‚îÇ   ‚îú‚îÄ‚îÄ user_model.dart               (Section 3.1)
‚îÇ   ‚îú‚îÄ‚îÄ posts_model.dart              (Section 3.2)
‚îÇ   ‚îú‚îÄ‚îÄ event_model.dart              (Section 3.3)
‚îÇ   ‚îú‚îÄ‚îÄ club_model.dart               (Section 3.4)
‚îÇ   ‚îú‚îÄ‚îÄ competition_model.dart        (Section 3.5)
‚îÇ   ‚îú‚îÄ‚îÄ lost_found_item_model.dart    (Section 3.6)
‚îÇ   ‚îú‚îÄ‚îÄ comment_model.dart            (Section 3.7)
‚îÇ   ‚îú‚îÄ‚îÄ course_routine_model.dart     (Section 3.8)
‚îÇ   ‚îî‚îÄ‚îÄ [other models...]
‚îÇ
‚îú‚îÄ‚îÄ providers/                        üîÑ Simplify these
‚îÇ   ‚îú‚îÄ‚îÄ user_provider.dart
‚îÇ   ‚îú‚îÄ‚îÄ post_provider.dart
‚îÇ   ‚îú‚îÄ‚îÄ event_provider.dart
‚îÇ   ‚îú‚îÄ‚îÄ club_provider.dart
‚îÇ   ‚îî‚îÄ‚îÄ [other providers...]
‚îÇ
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ widgets/                      ‚úÖ All complete
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ custom_input.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ default_button.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empty_state.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [18+ widgets...]
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ pages/                        ‚úÖ All complete
‚îÇ       ‚îú‚îÄ‚îÄ auth/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ login_page.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ sign_up_page.dart
‚îÇ       ‚îú‚îÄ‚îÄ thread/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ thread_page.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ thread_detail_page.dart
‚îÇ       ‚îú‚îÄ‚îÄ events/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ events_page.dart
‚îÇ       ‚îú‚îÄ‚îÄ more/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ profile_page.dart
‚îÇ       ‚îî‚îÄ‚îÄ [all other pages...]
‚îÇ
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ theme/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app_theme.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_dimensions.dart
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ snackbar_helper.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog_helper.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ date_formatter.dart
‚îÇ   ‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ error_messages.dart
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îî‚îÄ‚îÄ auth_service.dart
‚îÇ
‚îî‚îÄ‚îÄ routing/
    ‚îî‚îÄ‚îÄ app_routes.dart

================================================================================
3. üóÑÔ∏è DATABASE SCHEMA (Complete Firestore Structure)
================================================================================

### Database: Firebase Firestore
- Type: NoSQL Document Database
- Structure: Collections ‚Üí Documents ‚Üí Fields
- Subcollections: For votes, comments, and nested data

### Key Principles:
1. Denormalization: Store user names with posts to avoid extra queries
2. Subcollections: For one-to-many relationships (votes, comments)
3. Auto-Generated IDs: Let Firestore generate document IDs
4. Timestamps: Use FieldValue.serverTimestamp() for consistency

### Collections Summary:
| Collection | Purpose |
|------------|---------|
| users | User profiles & authentication |
| posts | Thread posts/discussions |
| events | Campus events |
| clubs | Student clubs/organizations |
| competitions | Competitions & contests |
| lost_found_items | Lost & found items |
| comments | Comments on posts/events |
| course_routines | Student course schedules |
| scholarships | Scholarship information |
| notifications | User notifications |

================================================================================
3.1. üë§ USERS COLLECTION
================================================================================

**Collection Path:** users/{userId}

**Document Structure:**
{
  "uid": "firebase_auth_uid",           // Firebase Auth UID
  "id": "auto_generated",               // Alternative ID (can be same as uid)
  "firstName": "John",
  "lastName": "Doe",
  "email": "john.doe@university.edu",
  "university": "Example University",
  "department": "Computer Science",
  "batch": "2024",                      // Optional: graduation year

  // Gamification
  "xp": 0,                              // Experience points
  "contributions": 0,                   // Number of posts/comments
  "badges": [],                         // Array of badge IDs

  // Preferences
  "favoriteCourses": [],                // Array of course IDs
  "notifyMe": true,                     // Notification preference
  "theme": "system",                    // "light", "dark", or "system"

  // Metadata
  "role": "student",                    // "student", "admin", "moderator"
  "createdAt": Timestamp,
  "lastLogin": Timestamp
}

**Used In:**
- Profile Page (profile_page.dart)
- Edit Profile Page (edit_profile_page.dart)
- Settings Page (settings_page.dart)
- Posts: created_by (uid), created_by_name (firstName + lastName)
- Events: organizerId (uid), organizerName (firstName + lastName)

================================================================================
3.2. üí¨ POSTS COLLECTION
================================================================================

**Collection Path:** posts/{postId}

**Document Structure:**
{
  "post_id": "auto_generated",          // Firestore document ID
  "type": "question",                   // "question", "discussion", "announcement"

  // Author Info (Denormalized)
  "created_by": "user_uid",
  "created_by_name": "John Doe",        // Stored to avoid extra query

  // Content
  "title": "How to solve X?",           // Optional
  "content": "Full post content...",
  "course_id": "CS101",                 // Optional

  // Engagement
  "upvote_count": 0,
  "downvote_count": 0,
  "comment_count": 0,                   // Optional

  // Metadata
  "created_at": Timestamp,
  "updated_at": Timestamp
}

**Subcollection:** posts/{postId}/votes/{userId}
{
  "type": "upvote",                     // "upvote" or "downvote"
  "timestamp": Timestamp
}

**Why Subcollection?**
- Scalable: Doesn't increase post document size
- Atomic: Use transactions for vote updates
- User-specific: Easy to check if user voted

**Used In:**
- Thread Page (thread_page.dart) - List, filter, create
- Thread Detail Page (thread_detail_page.dart) - View, comment
- Add Post Dialog (add_post.dart) - Create
- Home Page (home_page.dart) - Recent posts

================================================================================
3.3. üéâ EVENTS COLLECTION
================================================================================

**Collection Path:** events/{eventId}

**Document Structure:**
{
  "id": "auto_generated",
  "title": "Tech Fest 2026",
  "description": "Annual technology festival...",
  "category": "tech",                   // "tech", "cultural", "sports", "academic"
  "location": "Main Auditorium",

  // Dates
  "eventDate": Timestamp,               // Start date/time
  "eventEndDate": Timestamp,            // End date (optional)

  // Media
  "imageUrl": "https://...",            // Optional banner

  // Organizer (Denormalized)
  "organizerId": "user_uid",
  "organizerName": "John Doe",

  // Registration
  "attendeeIds": [],                    // Array of registered user UIDs
  "maxAttendees": 100,

  // Status
  "isActive": true,

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp,
  "additionalInfo": {}                  // Flexible field
}

**Computed Properties (in Model):**
- isFull: attendeeIds.length >= maxAttendees
- isPast: eventDate < DateTime.now()
- isUpcoming: eventDate > DateTime.now()
- spotsLeft: maxAttendees - attendeeIds.length

**Used In:**
- Events Page (events_page.dart) - List, filter, create
- Event Detail Page (event_detail_page.dart) - View, register
- Event Attendees Page (event_attendees_page.dart) - View list
- Home Page (home_page.dart) - Upcoming events

================================================================================
3.4. üèõÔ∏è CLUBS COLLECTION
================================================================================

**Collection Path:** clubs/{clubId}

**Document Structure:**
{
  "id": "auto_generated",
  "name": "Computer Science Club",
  "description": "A club for CS enthusiasts...",
  "category": "academic",               // "academic", "cultural", "sports"
  "logoUrl": "https://...",

  // Leadership
  "presidentId": "user_uid",
  "presidentName": "John Doe",

  // Members
  "memberIds": [],                      // Array of member UIDs
  "maxMembers": 50,

  // Contact
  "contactEmail": "club@university.edu",
  "contactPhone": "+1234567890",
  "meetingLocation": "Room 301",
  "meetingSchedule": "Every Friday 5 PM",

  // Social
  "socialLinks": {
    "facebook": "https://...",
    "instagram": "https://...",
    "website": "https://..."
  },

  // Status
  "isActive": true,

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Used In:**
- Clubs Page (clubs_page.dart) - List, search
- Club Detail Page (club_detail_page.dart) - View, join/leave

================================================================================
3.5. üèÜ COMPETITIONS COLLECTION
================================================================================

**Collection Path:** competitions/{competitionId}

**Document Structure:**
{
  "id": "auto_generated",
  "title": "Coding Challenge 2026",
  "description": "Annual coding competition...",
  "category": "coding",                 // "coding", "design", "business"

  // Dates
  "registrationStartDate": Timestamp,
  "registrationEndDate": Timestamp,
  "competitionStartDate": Timestamp,
  "competitionEndDate": Timestamp,

  // Details
  "location": "Computer Lab",
  "imageUrl": "https://...",
  "rules": "Full competition rules...",

  // Organizer
  "organizerId": "user_uid",
  "organizerName": "John Doe",

  // Registration
  "participantIds": [],                 // Array of registered UIDs
  "maxParticipants": 100,
  "teamSize": 1,                        // 1 for individual

  // Prizes
  "prizes": {
    "first": "Rs. 10,000",
    "second": "Rs. 5,000",
    "third": "Rs. 2,000"
  },

  // Status
  "status": "upcoming",                 // "upcoming", "ongoing", "completed"
  "isActive": true,

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Used In:**
- Competitions Page (competitions_page.dart) - List, filter
- Competition Detail Page (competition_detail_page.dart) - View
- Registration Page (registration_page.dart) - Register

================================================================================
3.6. üîç LOST_FOUND_ITEMS COLLECTION
================================================================================

**Collection Path:** lost_found_items/{itemId}

**Document Structure:**
{
  "id": "auto_generated",
  "title": "Lost Phone",
  "description": "Black iPhone 13...",
  "type": "lost",                       // "lost" or "found"
  "category": "electronics",            // "electronics", "accessories", "documents"

  // Location & Date
  "location": "Library 2nd Floor",
  "date": Timestamp,

  // Media
  "imageUrl": "https://...",

  // Poster Info
  "posterId": "user_uid",
  "posterName": "John Doe",
  "posterContact": "john@university.edu",
  "posterPhone": "+1234567890",

  // Status
  "status": "open",                     // "open", "claimed", "returned", "closed"
  "isActive": true,

  // Claim Tracking
  "claimedById": "user_uid",            // Optional
  "claimedAt": Timestamp,               // Optional

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Used In:**
- Lost & Found Page (lost_and_found_page.dart) - List, filter
- Item Detail Page (item_detail_page.dart) - View, claim

================================================================================
3.7. üí≠ COMMENTS COLLECTION
================================================================================

**Collection Path:** comments/{commentId}

**Document Structure:**
{
  "id": "auto_generated",

  // Parent Reference
  "parentId": "post_id_or_event_id",
  "parentType": "post",                 // "post", "event", "competition"

  // Content
  "content": "This is a comment...",

  // Author (Denormalized)
  "authorId": "user_uid",
  "authorName": "John Doe",
  "authorAvatarUrl": "https://...",     // Optional

  // Threading (for replies)
  "replyToId": "comment_id",            // Optional
  "replyToAuthor": "Jane Smith",        // Optional

  // Engagement
  "upvotes": 0,
  "downvotes": 0,
  "upvotedBy": [],                      // Array of user UIDs
  "downvotedBy": [],

  // Status
  "isEdited": false,
  "isDeleted": false,

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Query Patterns:**
- Get all comments: where('parentId', '==', postId).where('parentType', '==', 'post')
- Get top-level: Add .where('replyToId', '==', null)
- Get replies: where('replyToId', '==', commentId)

**Used In:**
- Thread Detail Page - Comments on posts
- Event Comments Page - Comments on events

================================================================================
3.8. üìö COURSE_ROUTINES COLLECTION
================================================================================

**Collection Path:** course_routines/{routineId}

**Document Structure:**
{
  "id": "auto_generated",
  "userId": "user_uid",                 // Owner
  "semester": "Spring 2026",
  "year": "2026",

  // Courses Array
  "courses": [
    {
      "courseCode": "CS101",
      "courseName": "Intro to Programming",
      "credits": 3,
      "instructor": "Dr. Smith",
      "room": "Room 101",
      "schedule": [
        {
          "day": "Monday",
          "startTime": "09:00",
          "endTime": "10:30"
        }
      ],
      "color": "#FF5733"
    }
  ],

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Usage:**
- One document per user per semester
- Schedule array allows multiple class times
- Color for calendar display

**Used In:**
- Course Routine Page (course_routine_page.dart)

================================================================================
3.9. üéì SCHOLARSHIPS COLLECTION
================================================================================

**Collection Path:** scholarships/{scholarshipId}

**Document Structure:**
{
  "id": "auto_generated",
  "title": "Merit Scholarship 2026",
  "description": "Full scholarship...",
  "category": "merit",                  // "merit", "need-based", "sports"

  // Eligibility
  "eligibilityRequirements": [
    "GPA >= 3.5",
    "Full-time student"
  ],
  "requiredDocuments": [
    "Transcripts",
    "Recommendation letters"
  ],

  // Details
  "amount": "Full tuition",
  "numberOfAwards": 10,
  "deadline": Timestamp,
  "applicationUrl": "https://...",

  // Contact
  "contactEmail": "scholarships@university.edu",
  "contactPhone": "+1234567890",

  // Status
  "isActive": true,

  // Metadata
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}

**Used In:**
- Scholarship Page (scholarship_page.dart) - Read-only list

================================================================================
3.10. üîî NOTIFICATIONS COLLECTION
================================================================================

**Collection Path:** notifications/{notificationId}

**Document Structure:**
{
  "id": "auto_generated",
  "userId": "user_uid",                 // Recipient

  // Content
  "title": "New Comment",
  "message": "John Doe commented on your post",
  "type": "comment",                    // "comment", "vote", "event"

  // Action Data
  "actionType": "navigate",
  "actionData": {
    "route": "/thread/detail",
    "postId": "post_id"
  },

  // Status
  "isRead": false,

  // Metadata
  "createdAt": Timestamp
}

**Used In:**
- Notifications Page (notifications_page.dart)

================================================================================
4. üìã PHASE-BY-PHASE IMPLEMENTATION PLAN
================================================================================

### PHASE 1: Profile & Authentication (Week 1) ‚≠ê
**Goal:** User can register, login, view/edit profile

**Tasks:**
1. User Registration ‚Üí Create document in users collection (3.1)
2. Login ‚Üí Update lastLogin timestamp
3. View Profile ‚Üí Read user document from Firestore
4. Edit Profile ‚Üí Update user document fields
5. Settings ‚Üí Update user preferences

**Files:**
- lib/providers/user_provider.dart
- lib/providers/login_provider.dart
- lib/ui/pages/more/profile/profile_page.dart
- lib/ui/pages/more/profile/edit_profile_page.dart

---

### PHASE 2: Posts/Threads (Week 2) ‚≠ê
**Goal:** Users can create, view, vote on posts

**Tasks:**
1. List Posts ‚Üí Query posts collection (3.2)
2. Create Post ‚Üí Add document to posts collection
3. Vote on Post ‚Üí Update votes subcollection + counts
4. View Post Detail ‚Üí Read post + comments
5. Add Comment ‚Üí Create comment document (3.7)

**Files:**
- lib/providers/post_provider.dart
- lib/ui/pages/thread/thread_page.dart
- lib/ui/pages/thread/thread_detail_page.dart

---

### PHASE 3: Events (Week 3)
**Goal:** Users can view and register for events

**Tasks:**
1. List Events ‚Üí Query events collection (3.3)
2. View Event Detail ‚Üí Read single event
3. Register for Event ‚Üí Add userId to attendeeIds
4. Create Event ‚Üí Add document
5. View Attendees ‚Üí Read attendeeIds

**Files:**
- lib/providers/event_provider.dart
- lib/ui/pages/events/events_page.dart
- lib/ui/pages/events/event_detail_page.dart

---

### PHASE 4: Study Hub (Week 4)
**Tasks:**
1. Course Routine ‚Üí CRUD for user's schedule (3.8)
2. Scholarships ‚Üí Read-only list (3.9)
3. Roadmap ‚Üí Static data (no backend)
4. CGPA Calculator ‚Üí Local only (no backend)

---

### PHASE 5: Campus Hub (Week 5+)
**Tasks:**
1. Clubs ‚Üí List and join (3.4)
2. Competitions ‚Üí View and register (3.5)
3. Lost & Found ‚Üí Create and search (3.6)

================================================================================
5. üèóÔ∏è SIMPLIFIED ARCHITECTURE & CODE PATTERNS
================================================================================

### OLD Architecture (Too Complex):
UI ‚Üí Provider ‚Üí Repository ‚Üí DatabaseService ‚Üí Adapter ‚Üí Firestore

### NEW Architecture (Simple):
UI ‚Üí Provider ‚Üí Firestore

---

### PATTERN 1: Simple Provider

```dart
class PostProvider extends ChangeNotifier {
  List<PostModel> _posts = [];
  bool _isLoading = false;
  String? _error;

  List<PostModel> get posts => _posts;
  bool get isLoading => _isLoading;
  String? get error => _error;

  // Fetch from Firestore
  Future<void> fetchPosts() async {
    _isLoading = true;
    notifyListeners();

    try {
      final snapshot = await FirebaseFirestore.instance
          .collection('posts')
          .orderBy('created_at', descending: true)
          .limit(20)
          .get();

      _posts = snapshot.docs
          .map((doc) => PostModel.fromJson(doc.data()))
          .toList();

      _error = null;
    } catch (e) {
      _error = e.toString();
    }

    _isLoading = false;
    notifyListeners();
  }

  // Create post
  Future<void> createPost(PostModel post) async {
    try {
      await FirebaseFirestore.instance
          .collection('posts')
          .add(post.toJson());
      await fetchPosts();
    } catch (e) {
      _error = e.toString();
      notifyListeners();
    }
  }
}
```

---

### PATTERN 2: Using Provider in UI

```dart
class ThreadPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Consumer<PostProvider>(
      builder: (context, provider, child) {
        if (provider.isLoading) {
          return CircularProgressIndicator();
        }

        if (provider.error != null) {
          return ErrorWidget(message: provider.error);
        }

        return ListView.builder(
          itemCount: provider.posts.length,
          itemBuilder: (context, index) {
            return ThreadCard(post: provider.posts[index]);
          },
        );
      },
    );
  }
}
```

---

### PATTERN 3: Reading from Firestore

```dart
// Get all documents
final snapshot = await FirebaseFirestore.instance
    .collection('posts')
    .get();

final posts = snapshot.docs
    .map((doc) => PostModel.fromJson(doc.data()))
    .toList();

// Get with filters
final snapshot = await FirebaseFirestore.instance
    .collection('posts')
    .where('type', isEqualTo: 'question')
    .orderBy('created_at', descending: true)
    .limit(20)
    .get();

// Get single document
final doc = await FirebaseFirestore.instance
    .collection('posts')
    .doc(postId)
    .get();

if (doc.exists) {
  final post = PostModel.fromJson(doc.data()!);
}
```

---

### PATTERN 4: Writing to Firestore

```dart
// Create (auto-generate ID)
final docRef = await FirebaseFirestore.instance
    .collection('posts')
    .add(post.toJson());

final newPostId = docRef.id;

// Create (custom ID)
await FirebaseFirestore.instance
    .collection('posts')
    .doc(customId)
    .set(post.toJson());

// Update
await FirebaseFirestore.instance
    .collection('posts')
    .doc(postId)
    .update({
      'content': newContent,
      'updated_at': FieldValue.serverTimestamp(),
    });

// Delete
await FirebaseFirestore.instance
    .collection('posts')
    .doc(postId)
    .delete();
```

---

### PATTERN 5: Array Operations

```dart
// Add to array
await FirebaseFirestore.instance
    .collection('events')
    .doc(eventId)
    .update({
      'attendeeIds': FieldValue.arrayUnion([userId]),
    });

// Remove from array
await FirebaseFirestore.instance
    .collection('events')
    .doc(eventId)
    .update({
      'attendeeIds': FieldValue.arrayRemove([userId]),
    });
```

---

### PATTERN 6: Transactions (for votes)

```dart
await FirebaseFirestore.instance.runTransaction((transaction) async {
  final postRef = FirebaseFirestore.instance
      .collection('posts')
      .doc(postId);

  final voteRef = postRef
      .collection('votes')
      .doc(userId);

  final postDoc = await transaction.get(postRef);
  final currentCount = postDoc.data()?['upvote_count'] ?? 0;

  transaction.set(voteRef, {'type': 'upvote'});
  transaction.update(postRef, {'upvote_count': currentCount + 1});
});
```

================================================================================
6. üé® THEME & STYLING GUIDELINES (MUST FOLLOW!)
================================================================================

### COLOR SCHEME

‚úÖ CORRECT:
```dart
Theme.of(context).colorScheme.primary
Theme.of(context).colorScheme.surface
Theme.of(context).colorScheme.onSurface
```

‚ùå WRONG:
```dart
Colors.blue
Color(0xFF3F51B5)
Colors.white
```

Common colorScheme properties:
- colorScheme.primary - Primary brand color
- colorScheme.onPrimary - Text/icons on primary
- colorScheme.surface - Surface backgrounds
- colorScheme.onSurface - Text on surfaces
- colorScheme.error - Error states

---

### DIMENSIONS

‚úÖ CORRECT:
```dart
SizedBox(height: AppDimensions.h16)
padding: EdgeInsets.all(AppDimensions.space12)
fontSize: AppDimensions.bodyFontSize
borderRadius: BorderRadius.circular(AppDimensions.radius12)
```

‚ùå WRONG:
```dart
SizedBox(height: 16)
padding: EdgeInsets.all(12)
fontSize: 14
borderRadius: BorderRadius.circular(12)
```

Available AppDimensions:
- Spacing: space4, space8, space12, space16, space24, space32
- Height: h4, h8, h12, h16, h24, h32
- Padding: horizontalPadding, verticalPadding
- Font sizes: titleFontSize, bodyFontSize, captionFontSize
- Radius: radius4, radius8, radius12, radius16

---

### CENTRALIZED SYSTEMS

**1. Validation** (lib/core/utils/validators.dart)
```dart
CustomInput(
  validator: Validators.email,
  // or Validators.required, Validators.phone, Validators.minLength(6)
)
```

**2. Snackbar** (lib/core/utils/snackbar_helper.dart)
```dart
SnackbarHelper.showSuccess(context, 'Success!');
SnackbarHelper.showError(context, 'Error occurred');
SnackbarHelper.showInfo(context, 'Info message');
```

**3. Dialogs** (lib/core/utils/dialog_helper.dart)
```dart
final confirmed = await DialogHelper.showConfirmation(
  context,
  title: 'Delete Item',
  message: 'Are you sure?',
);
```

**4. Date Formatting** (lib/core/utils/date_formatter.dart)
```dart
DateFormatter.formatDate(date);        // "Jan 11, 2026"
DateFormatter.timeAgo(date);           // "2 hours ago"
```

================================================================================
7. ‚úÖ WORKFLOW & CHECKLIST
================================================================================

### BEFORE STARTING A NEW FEATURE:

1. ‚úÖ Check Section 3 (DATABASE SCHEMA) for collection structure
2. ‚úÖ Identify which UI page needs backend
3. ‚úÖ Check if model class exists (it should!)
4. ‚úÖ Create or simplify the provider
5. ‚úÖ Use Consumer in UI to display data

---

### WHEN IMPLEMENTING:

1. ‚úÖ Start with READ operations (display data)
2. ‚úÖ Then add CREATE operations (forms)
3. ‚úÖ Then add UPDATE and DELETE
4. ‚úÖ Test each operation before moving on
5. ‚úÖ Use SnackbarHelper for user feedback
6. ‚úÖ Handle loading and error states

---

### COMMON MISTAKES TO AVOID:

1. ‚ùå Hardcoding colors (use colorScheme)
2. ‚ùå Hardcoding dimensions (use AppDimensions)
3. ‚ùå Wrong field names (check Section 3)
4. ‚ùå Not disposing controllers
5. ‚ùå Not handling null/empty states
6. ‚ùå Not showing loading indicators

---

### SUCCESS CRITERIA (Each phase complete when):

‚úÖ Users can see data from Firestore
‚úÖ Users can create new data
‚úÖ Users can edit/delete their data
‚úÖ Loading states work properly
‚úÖ Error handling shows helpful messages
‚úÖ No console errors or warnings
‚úÖ UI remains responsive
‚úÖ Data persists after app restart

================================================================================
üìû QUICK HELP
================================================================================

**Where is...?**
- Database structure? ‚Üí Section 3 (above)
- Collection fields? ‚Üí Section 3.1 to 3.10
- Color constants? ‚Üí Use Theme.of(context).colorScheme
- Dimension constants? ‚Üí AppDimensions class
- Validation? ‚Üí lib/core/utils/validators.dart
- Error messages? ‚Üí lib/core/constants/error_messages.dart
- User feedback? ‚Üí SnackbarHelper, DialogHelper

**How do I...?**
- Read from Firestore? ‚Üí Section 5 - PATTERN 3
- Write to Firestore? ‚Üí Section 5 - PATTERN 4
- Use arrays? ‚Üí Section 5 - PATTERN 5
- Handle votes? ‚Üí Section 5 - PATTERN 6
- Display data in UI? ‚Üí Section 5 - PATTERN 2

================================================================================
üéØ REMEMBER
================================================================================

‚ú® Your UI is beautiful and complete
‚ú® Your models are ready to use
‚ú® Your database schema is documented (Section 3)
‚ú® Now just connect the dots!

Focus on ONE feature at a time:
Profile (Phase 1) ‚Üí Posts (Phase 2) ‚Üí Events (Phase 3) ‚Üí Others

Start simple, make it work, then optimize.

You got this! üöÄ

================================================================================

Last Updated: 2026-01-12
Status: Ready for Phase-by-Phase Implementation
Next Step: Start with Phase 1 (Profile & Auth)

================================================================================
